# Results

```{r}
df = read.csv("Speed Dating Data.csv")

library(tidyverse)
library(patchwork)
library(RColorBrewer)
library(GGally)
library(dplyr)
```

## Representation of paricipants by different categories

First, let us check the representation of our participants. This answers the question if the sample of students participating in this research experiment is truly randomized. This can help us know if there is/are a group of people that is/are over-represented. In other words, it tells us about the selection bias.

We have chosen four characteristics of the participants: field of study, age, race, and intended career. Here are the bar plots for the same.

*Note: The field, race, and career codes are summarized in the [data key](https://github.com/amruthasundar/final-edav-project/blob/main/Speed%20Dating%20Data%20Key.doc).*

```{r, fig.width=12, fig.height=9}
df_by_field = df %>% 
  group_by(field_cd) %>% 
  summarise(count = n()) %>% 
  mutate(per = count*100/sum(count))

df_by_field$field_cd = as.factor(df_by_field$field_cd)

g_by_field = ggplot(df_by_field, aes(x = field_cd, y = per)) +
  geom_bar(stat = "identity", color = "#77D86C", fill = "#B3ECAD", alpha = 0.9) +
  xlab("Field of Study") +
  ylab("Percentage of participants") +
  ggtitle("Representation of participants by field of study")

df_by_age = df %>% 
  group_by(iid) %>% 
  select(iid, age)

df_by_age = unique(df_by_age)

g_by_age = ggplot(df_by_age, aes(x = age)) +
  geom_bar(color = "#77D86C", fill = "#B3ECAD", alpha = 0.9) +
  #scale_x_binned() +
  xlab("Age Group") +
  ylab("Number of participants") +
  ggtitle("Representation of participants by age")

df_by_race = df %>% 
  group_by(iid) %>% 
  select(iid, race)

df_by_race$race = as.factor(df_by_race$race)

g_by_race = ggplot(df_by_race, aes(x = race)) +
  geom_bar(color = "#77D86C", fill = "#B3ECAD", alpha = 0.9, binwidth = 5) +
  xlab("Race") +
  ylab("Number of participants") +
  ggtitle("Representation of participants by race")

df_by_career = df %>% 
  group_by(iid) %>% 
  select(iid, career_c)

df_by_career = unique(df_by_career)
df_by_career$career_c = as.factor(df_by_career$career_c)

g_by_career = ggplot(df_by_career, aes(x = career_c)) +
  geom_bar(color = "#77D86C", fill = "#B3ECAD", alpha = 0.9) +
  xlab("Intended Career") +
  ylab("Number of participants") +
  ggtitle("Representation of participants by intended career")

plot = (g_by_field | g_by_age)/(g_by_race | g_by_career)
plot 
```

Here are the inferences from these plots:

**1. For field of study**

We can see that about 23% of the participants are from the 8th field of study, which is Business/Econ/Finance. This represents the highest percentage of students. Considering that this experiment was conducted by professors from the Columbia Business School, a lot of students from that field were expected. This is followed by fields 10 (Biological Sciences/Chemistry/Physics) and 5 (Engineering) representing the 2nd and 3rd highest percentages.

The 17th field of study, which is Architecture, constitutes about less than 1% of the participants. This is the least represented group in terms of field of study. Before that, comes field 12 (undecided), before which comes field 18 (other).

**2. For age group**

We can observe that most students are between the age 20 and 30, with about 68 people with age around 27. Almost all the participants are between 18 and 39 years of age, with the exception of a few of age 42 and 55.

**3. For race**

We can observe that race 2, which is European/Caucasian-American is the highest represented group here, which has about 4700 participants. Second most highest represented race is 4, i.e., Asian/Pacific Islander/Asian-American with about 2000 participants.

The count for race not specified is the least among all the races. Apart from that, the least represented race is Black/African American with about 450 participants.

**4. For intended career**

Here, we can observe that the intended career of most students is career 2 and 7, i.e., Academic/Research and Banking/Consulting/Finance/Marketing/Business/CEO/Entrepreneur/Admin respectively. They constitute for about 155 and 135 participants respectively. The least represented career field is career 17, which is Architecture. Similar trend was seen in the representation by field of study.


## Number of yes matches per participant

In the original experiment, the variable `match` is the target variable. This indicates if the person was matched to the other person or not. We can use a Cleveland dot plot to show the number of yes matches each participant got. As mentioned before, we are using waves 10-21. Moreover, we faceted them by waves and color coded by the gender so we can also understand patterns among genders and within individual waves.

```{r fig.width=12, fig.height=40}
df_match_total = df %>% 
  filter(wave %in% (10:21)) %>% 
  select(iid, match, wave, gender) %>% 
  group_by(iid) %>% 
  mutate(yes = sum(match))

df_match_total = unique(df_match_total)
df_match_total$iid = as.factor(df_match_total$iid)
df_match_total$wave = as.factor(df_match_total$wave)
df_match_total$gender = factor(df_match_total$gender,
                                levels = c(0,1),
                                labels = c("female","male"))
g_match_total = ggplot(df_match_total, aes(x = yes, y = reorder(iid, yes), color = gender)) +
  geom_point(size = 3) +
  scale_x_continuous(limits = c(0, 15), breaks = seq(0, 15, 5)) +
  facet_grid(rows = vars(wave), scales = "free_y", space = "free_y") +
  scale_colour_manual(values = c("#77D86C", "#DD8C75")) +
  theme_bw() +
  theme(panel.grid.major.x = element_blank(),
        panel.grid.minor.x = element_blank(),
        panel.grid.major.y = element_line(colour = "grey60", linetype = "dashed")) +
    xlab("Number of yes matches") +
    ylab("Participant ID number") +
    ggtitle("Number of yes matches per person faceted by wave",
            subtitle = "For waves 10-21 (color-coded by gender)")

g_match_total
```

Here, we can observe that the maximum number of yes matches of participants in waves 10 and 13 is always less than 5. Also, the highest number of matches for waves 20 and 18 is 3. Waves 11, 14, 15, 18 and 21 have a wide variety of matches for different people.

Moreover, all waves have participants who are not matched with other people. The number of participants across all waves who did not get matched seem to have an even number of males and females. The most matched participant is a female from wave 21 who got 14 matches.

## Analysing correlation between the chosen variables

One of the important questions we want to address is visualizing whether the features in the dataset exhibit correlation among themselves or with the target variable that tells whether the pair matched or not. This is important as it will help us come up with blatant patterns observed in features that help in formulations of simple if-then rules. 
For the purposes of this visualization, we have narrowed down comparison of ratings to a specific question that were asked prior to the event - Distribute a score of 100 among the five attributes in the order of importance that you would like to see in your potential date.
  
This question is interesting to inspect if the attributes of what people look for in their potential partners bear any correlation among themselves and also with the actual number of people they agreed to match with.

```{r fig.width=12, fig.height=40}
columns = c("iid", "age", "race", "attr1_1", "sinc1_1", "intel1_1", "fun1_1", "amb1_1")

df_distinct = df %>% group_by(iid, age, race, attr1_1, sinc1_1, intel1_1, fun1_1, amb1_1) %>% summarise(total_matches=sum(match))

ggpairs(df_distinct[c(columns,  "total_matches")], lower=list(combo=wrap("facethist")))+
  theme(panel.grid.major.x = element_blank(),
        panel.grid.minor.x = element_blank(),) +
  ggtitle("Pair plot for attributes and total number of people agreed to match")
```

Some of the interesting inferences we can make regarding the plots are,

* The distribution of most of the attributes are close to normal except for ambition with seems to be right skewed. A relatively high number of participants have given a low priority to ambition of their potential partners as a deciding factor.
* While most of the features are weakly negatively correlated almost exhibiting no correlation at all, the pair of feature sincerity, attractiveness and sincerity, intelligence are negatively correlated by the greatest amount. This tells us that people who gave a high preference to sincerity gave a low preference to intelligence and attractiveness and the other set of people weighed attractiveness and intelligence over sincerity.
* The age of the participants are mostly between 20 and 30, while one senior participant over 50 did not match with anyone, evident by the anomaly of the farthest point in the age vs total_matches plot.
* The trend that is seen in all the plots of attributes of attractiveness, sincerity, intelligence, fun and ambition is that, as the rating or the priority of certain feature increases, the number of matches goes down, for a few points. This is justifiable with the points that are to the farthest right at the bottom. This is expected as participants who have a really high expectation on one feature might not find someone suitable to meet their high expectations on that feature.
* It is interesting to note that the same plot of features vs total matches also exhibits some anomaly. There seems to be one point in all these plots that have a relatively medium level rating/priority while the number of matches is pretty high. This can be verified by the top most point to the left of the plots. There were some participants who are estimated to have based their criteria of matching on factors others that the ones that were rated on. This can be infered as they have a relatively high number of matches than their peers who matched less, given the same priority for those features.